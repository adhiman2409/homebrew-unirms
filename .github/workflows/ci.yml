name: CI

on:
  push:
    branches: [ main ]
  pull_request:
    branches: [ main ]

jobs:
  test:
    runs-on: macos-latest

    steps:
    - name: Checkout tap
      uses: actions/checkout@v4

    - name: Set up Homebrew
      run: |
        brew update
        brew tap --custom-remote adhiman2409/homebrew-unirms file://$(pwd)

    - name: Test Cask syntax
      run: |
        brew style --cask unirms-monitor

    - name: Test Cask audit
      run: |
        brew audit --cask unirms-monitor

    - name: Test Cask installation (dry run)
      run: |
        # Note: This would require the actual DMG to be available
        # For now, just validate the Cask structure
        echo "Cask validation completed successfully"